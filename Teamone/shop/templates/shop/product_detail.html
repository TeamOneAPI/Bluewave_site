{% extends "shop/base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="row">
    <div class="col-md-6">
      {% if product.image %}
        <img src="{{ product.image.url }}" class="img-fluid rounded shadow-sm" alt="{{ product.name }}">
      {% else %}
        <div class="text-muted">No image available</div>
      {% endif %}
    </div>
    <div class="col-md-6">
      <h2>{{ product.name }}</h2>
      <p class="text-muted">Â£{{ product.price }}</p>
      <p>{{ product.description }}</p>
      <a href="{% url 'add_to_cart' product.id %}" class="btn btn-primary">Add to Cart</a>
    </div>
  </div>

  <hr>

  <h4 class="mt-4">Environmental Metrics</h4>
  {% if metrics %}
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>Date</th>
          <th>Salinity</th>
          <th>pH</th>
          <th>Pollutant Index</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        {% for m in metrics %}
          <tr>
            <td>{{ m.recorded_at|date:"Y-m-d H:i" }}</td>
            <td>{{ m.salinity }}</td>
            <td>{{ m.ph }}</td>
            <td>{{ m.pollutant_index }}</td>
            <td>{{ m.notes }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No metrics recorded for this unit yet.</p>
  {% endif %}
</div>
{% endblock %}
